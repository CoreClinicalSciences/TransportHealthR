[{"path":"https://coreclinicalsciences.github.io/TransportHealthR/articles/transportIP.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Transportability analysis using IOPW with TransportHealthR","text":"Transportability analysis statistical problem estimating causal effects treatment response target population using data gathered different population .e. study population. often used apply findings randomized clinical trial population substantially different characteristics difficult collect data population interest. Marginal causal effects study target populations often equal due different distributions effect modifiers two populations, causal effect estimates calculated using samples study population biased causal effect treatment target population. Therefore, effect modification must accounted obtain unbiased causal effect estimates target population using data study population. approach transportability analysis inverse odds participation weighting (IOPW), weighs observations study data inverse odds observation participating study given effect modifiers addition previous weights used covariate adjustment. TransportHealthR package provides functions streamline approach.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/articles/transportIP.html","id":"example","dir":"Articles","previous_headings":"","what":"Example","title":"Transportability analysis using IOPW with TransportHealthR","text":"Suppose interested estimating causal effect medication systolic blood pressure target population, able conduct observational study using samples study population. obtain unbiased causal effect estimates using study sample, account following covariates: sex (1 male), percent body fat, stress (binary, 1 stressed). Suppose using domain knowledge, know effectiveness medication depends stress levels whether patients taking another medication (yes ), variables effect modifiers. Notice covariates adjusted study data can also effect modifiers. can perform analysis follows. Firstly, data study target population may separate merged. separate, put together list. Make sure study data response treatment columns, target data (case 99% time). merged, make sure response treatment columns target data NA, binary variable indicating observations study data target data, participation coded 1 TRUE. Suppose study target data separately follows. can now perform transportability analysis IOPW approach using transportIP function. function needs: formula expressing marginal structural model (MSM) fit, set msmFormula argument, formula glm object expressing propensity model .e. model treatment assignment terms covariates, set propensityScoreModel argument. formula provided, logistic regression used default. Custom propensity weights weighting methods can also provided customPropensity argument instead; case, set propensityScoreModel NULL default overridden. formula glm object expressing participation model .e. model study participation terms effect modifiers, set participationModel argument. formula provided, logistic regression used default. Custom participation weights weighting methods can also provided customParticipation argument instead; case, set participationModel NULL default overridden. type MSM fit, set family argument. can families used glm one \"coxph\" \"survreg\". latter options survival analysis use default options methods survival package. study target data, separate merged, set data argument Whether transportability analysis generalizability analysis done, set transport argument (true transportability, default). Generalizability analysis weighs inverse probability study participation rather odds. components put together follows. , sysBloodPressure response med1 treatment. Recall sex, percent body fat stress covariates controlled study, medication stress effect modifiers. show results analysis, use summary function like lm. prints covariate balance tables pre- post-weighting covariates treatment groups (using propensity weights ) effect modifiers (using participation weights ) study target data, well summary output MSM model fit correct standard errors calculated sandwich::vcovBS. effect modifiers balance table, weights used inverse odds study data 1 target data transportability analysis, inverse probability observations generalizability analysis. Note custom participation weights provided, balance tables default transportability analysis since weights observations study data provided. transportIP object produced transportIP function contains model fitting objects propensity model, participation model MSM. can use methods like coef residuals objects . implemented package useful implementing summary. validity transportability analysis depends assumptions, including positivity conditional exchangeability. Positivity assumption observed levels covariates effect modifiers, probabilities treatment group study neither 0 1, respectively. evaluate assumption treatment assignment study participation, use plot function type = \"propensityHist\" type = \"participationHist\", respectively. outputs mirrored histograms probabilities treatment group different treatment groups participating study study target data, respectively. Non-overlap ranges histograms suggest violations positivity.   Conditional exchangeability roughly assumption possible confounding due controlled covariates effect modifiers. assumption, IOPW estimates reliable weighted distributions covariates effect modifiers similar treatment groups study target data, respectively. can (partially) evaluated using standardized mean differences (SMDs), shown table form summary function. plot function type = \"propensitySMD\" type = \"participationSMD\" provides graphical versions tables. general guideline SMD 0.1 indicates balance.   Model coefficient plots showing confidence intervals effect estimates provided plot function type = \"msm\". standard errors correct ones calculated sandwich::vcovBS.  Note plot outputs ggplots, ggplot2 installed, can customize .","code":"names(testData) #> [1] \"studyData\"  \"targetData\" print(\"Study data:\") #> [1] \"Study data:\" head(testData$studyData) #>   sysBloodPressure med1 sex stress med2 percentBodyFat #> 1         109.4347    1   1      0    0       16.84868 #> 2         115.9803    0   1      1    0       14.48698 #> 3         112.7886    0   1      0    0       15.53636 #> 4         107.6026    1   1      0    0       13.76442 #> 5         120.6845    0   0      1    0       30.08657 #> 6         113.4424    0   1      0    0       16.23256 print(\"Target data:\") #> [1] \"Target data:\" head(testData$targetData) #>   sex stress med2 percentBodyFat #> 1   0      1    0       26.12896 #> 2   1      1    0       12.04972 #> 3   1      1    0       12.55972 #> 4   0      0    1       27.07130 #> 5   1      1    0       11.85846 #> 6   0      1    0       27.64520 result <- transportIP(msmFormula = sysBloodPressure ~ med1, # MSM formula                       propensityScoreModel = med1 ~ sex + percentBodyFat + stress, # Propensity model                       participationModel = participation ~ stress + med2, # Participation model                       family = gaussian, # Type of MSM                       data = testData, # Data                       transport = T # Perform transportability analysis or generalizability analysis                       ) summary(result) #> Absolute SMDs of covariates between treatments before and after weighting: #>                       variable          smd   method #> sex                        sex 1.686088e-01 Observed #> percentBodyFat  percentBodyFat 1.723317e-01 Observed #> stress                  stress 6.216350e-02 Observed #> sex1                       sex 3.720148e-05 Weighted #> percentBodyFat1 percentBodyFat 1.157406e-03 Weighted #> stress1                 stress 3.204378e-03 Weighted #> Absolute SMDs of effect modifiers between study and target populations before and after weighting: #>         variable          smd   method #> stress    stress 0.6813098772 Observed #> med2        med2 0.4965440683 Observed #> stress1   stress 0.0001397205 Weighted #> med21       med2 0.0002326560 Weighted #> MSM results: #>  #> Call: #> stats::glm(formula = msmFormula, family = family, data = toAnalyze,  #>     weights = finalWeights) #>  #> Coefficients: #>             Estimate Std. Error t value Pr(>|t|)     #> (Intercept)  116.715      0.169  690.31  < 2e-16 *** #> med11         -1.771      0.497   -3.56  0.00039 *** #> --- #> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 #>  #> (Dispersion parameter for gaussian family taken to be 69.24548) #>  #>     Null deviance: 71451  on 999  degrees of freedom #> Residual deviance: 69107  on 998  degrees of freedom #> AIC: 6333 #>  #> Number of Fisher Scoring iterations: 2 msmResiduals <- residuals(result$msm) msmCoefficients <- coef(result$msm) plot(result, type = \"propensityHist\") plot(result, type = \"participationHist\") plot(result, type = \"propensitySMD\") plot(result, type = \"participationSMD\") plot(result, type = \"msm\")"},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Quang Vuong. Author, maintainer.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Vuong Q (2024). TransportHealthR: Transportability Analysis. R package version 0.1.1.9000, https://coreclinicalsciences.github.io/TransportHealthR/.","code":"@Manual{,   title = {TransportHealthR: Transportability Analysis},   author = {Quang Vuong},   year = {2024},   note = {R package version 0.1.1.9000},   url = {https://coreclinicalsciences.github.io/TransportHealthR/}, }"},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/index.html","id":"transporthealthr","dir":"","previous_headings":"","what":"Transportability Analysis","title":"Transportability Analysis","text":"TransportHealthR R package developed Core Clinical Sciences streamline transportability analyses randomized clinical trials observational studies. package supports IP weighting mergable individual patient data (IPD), G-computation unmergable IPD (aggregate data approach) aggregate data.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/index.html","id":"perks-of-package","dir":"","previous_headings":"","what":"Perks of package","title":"Transportability Analysis","text":"Transportability analysis often done separate steps statistician. One can perform analysis using existing causal inference packages, care needed order ensure valid analysis. TransportHealthR makes process accessible statisticians clinicians, model-fitting functions package inherently accomodate transportability analyses.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/index.html","id":"get-started-wip","dir":"","previous_headings":"","what":"Get started (WIP)","title":"Transportability Analysis","text":"Use R command devtools::install_github(\"CoreClinicalSciences/TransportHealthR\") console.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/index.html","id":"get-help-wip","dir":"","previous_headings":"","what":"Get help (WIP)","title":"Transportability Analysis","text":"Contact quang@coreclinicalsciences.com questions package.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/index.html","id":"contribute-wip","dir":"","previous_headings":"","what":"Contribute (WIP)","title":"Transportability Analysis","text":"Feel free create issues package’s Github repo. ’ll address soon can.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 TransportHealthR authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/is.transportIP.html","id":null,"dir":"Reference","previous_headings":"","what":"Check validity of IOPW result object — is.transportIP","title":"Check validity of IOPW result object — is.transportIP","text":"simple helper function validates whether components given transportIP object correct types.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/is.transportIP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check validity of IOPW result object — is.transportIP","text":"","code":"is.transportIP(transportIPResult)"},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/is.transportIP.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check validity of IOPW result object — is.transportIP","text":"transportIPResult Result object transportIP function","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/is.transportIP.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check validity of IOPW result object — is.transportIP","text":"boolean indicating whether components transportIP object correct types.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/plot.transportIP.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot graphs relevant to transportability analysis using IOPW — plot.transportIP","title":"Plot graphs relevant to transportability analysis using IOPW — plot.transportIP","text":"Plot graphs assessment covariate balance results IOPW analysis. function currently supports mirrored histograms, SMD plots model coefficient plots.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/plot.transportIP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot graphs relevant to transportability analysis using IOPW — plot.transportIP","text":"","code":"# S3 method for transportIP plot(   x,   type = \"propensityHist\",   bins = 30,   covariates = NULL,   effectModifiers = NULL,   ... )"},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/plot.transportIP.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot graphs relevant to transportability analysis using IOPW — plot.transportIP","text":"x Result transportIP function type One \"propensityHist\", \"propensitySMD\", \"participationHist\", \"participationSMD\", \"msm\". Hist produces mirrored histograms estimated probability treatment treatment groups (propensity), estimated probability participation study target data (participation). SMD produces SMD plots covariates treatment groups (propensity) effect modifiers study target data (participation). msm produces plots showing confidence intervals model coefficients, correct standard errors. bins Number bins propensity score/participation probability histograms. used Hist. covariates Vector strings indicating names covariates propensity model effectModifiers Vector strings indicating names effect modifiers participation model ... arguments previous function pass next function","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/plot.transportIP.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot graphs relevant to transportability analysis using IOPW — plot.transportIP","text":"ggplot object contains desired plot.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/summary.transportIP.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize results of a fitted MSM using the IOPW approach — summary.transportIP","title":"Summarize results of a fitted MSM using the IOPW approach — summary.transportIP","text":"Returns summary object contains summary fitted MSM well pre- post-weighting standardized mean differences (SMDs).","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/summary.transportIP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize results of a fitted MSM using the IOPW approach — summary.transportIP","text":"","code":"# S3 method for transportIP summary(object, covariates = NULL, effectModifiers = NULL, ...)  # S3 method for summary.transportIP print(x, out = stdout(), ...)"},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/summary.transportIP.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize results of a fitted MSM using the IOPW approach — summary.transportIP","text":"object Result transportIP function covariates Vector strings indicating names covariates propensity model effectModifiers Vector strings indicating names effect modifiers participation model ... arguments previous function pass next function x summary.transportIP object. Output stream.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/summary.transportIP.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize results of a fitted MSM using the IOPW approach — summary.transportIP","text":"summary.transportIP function returns summary.transportIP object containing following components: propensitySMD: Table unweighted weighted SMDs covariates treatment groups. propensity weights used. participationSMD: Table unweighted weighted SMDs effect modifiers study data target data. participation weights used. msmSummary: Summary object model object MSM. correct variance estimators set glm, whereas set transportIP survreg coxph.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/transportIP.html","id":null,"dir":"Reference","previous_headings":"","what":"Transportability analysis using IOPW — transportIP","title":"Transportability analysis using IOPW — transportIP","text":"Estimates coefficients marginal structural model (MSM) using IP weighting generalizability transportability analysis. particular, estimators unbiased coefficients superpopulation target population, respectively.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/transportIP.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Transportability analysis using IOPW — transportIP","text":"","code":"transportIP(   msmFormula,   propensityScoreModel = NULL,   participationModel = NULL,   propensityWeights = NULL,   participationWeights = NULL,   treatment = NULL,   participation = NULL,   response = NULL,   family = stats::gaussian,   method = c(\"logistic\", \"probit\", \"loglog\", \"cloglog\", \"cauchit\"),   data,   transport = T,   bootstrapNum = 500 )"},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/transportIP.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Transportability analysis using IOPW — transportIP","text":"msmFormula formula MSM fitted, usually includes outcome, treatment effect modifiers. propensityScoreModel Either formula glm object representing model treatment assignment given covariates. participationModel Either formula glm object representing model study participation given effect modifiers. formula \"data\" argument list, add participation left-hand side formula. propensityWeights Vector custom weights balancing covariates treatments. Providing override formula model provided propensityScoreModel. vector entries sample size study data. participationWeights Vector custom weights balancing effect modifiers study target populations. Providing override formula model provided participationModel. vector entries sample size study data. treatment String indicating name treatment variable. NULL, auto-detected propensityScoreModel provided; otherwise remain NULL. Note using custom weights, treatment provided summary.transportIP plot.transportIP works. participation String indicating name participation variable. NULL, auto-detected participationModel provided; otherwise remain NULL. Note using custom weights, participation provided summary.transportIP plot.transportIP works. response String indicating name response variable. NULL, auto-detected form msmFormula. family Either family function used glm, one c(\"coxph\", \"survreg\"). method Link function used polr, one c(\"logistic\", \"probit\", \"loglog\", \"cloglog\", \"cauchit\"). data Either single data frame containing merged study target datasets, list containing study dataset target dataset. Note participationModel glm object, datasets merged, provide merged dataset containing response, treatment, covariates controlled original study, study participation effect modifiers case. Make sure code treatment participation 0-1 TRUE-FALSE, 1 TRUE representing treatment group study data, respectively. transport boolean indicating whether generalizability analysis (false) transportability analysis (true) done. bootstrapNum Number bootstrap datasets simulate obtain robust variance estimate.","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/transportIP.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Transportability analysis using IOPW — transportIP","text":"transportIP object containing following components: msm: Raw model fit object MSM class glm, survreg coxph, correct variance estimators appropriately replaced. class glm, extra var component containing correct variance estimates. propensityScoreModel: Model treatment assignment, NULL provided custom propensity weights used participationModel: Model study participation, NULL provided custom propensity weights used propensityWeights: Propensity weights used participationWeights: Participation weights used finalWeights: Weights used fit MSM customPropensity: Boolean indicating whether custom propensity weights used customParticipation: Boolean indicating whether custom participation weights used treatment: String indicating variable name treatment participation: String indicating variable name participation response: String indicating variable name response data: Data provided data argument. Either list containing study data target data data frame containing .","code":""},{"path":"https://coreclinicalsciences.github.io/TransportHealthR/reference/transportIP.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Transportability analysis using IOPW — transportIP","text":"function fits models treatment assignment study participation order calculate weights used fit MSM. models, formula provided, logistic regression used default. glm object provided, function extracts necessary weights object. function support weighting methods, required, provide custom weights. MSM-fitting functions provide correct standard errors -. Bootstrap used calculate robust bootstrap variance estimators parameter estimators. function replaces variance component summary.glm, coxph survreg robust variance estimators directly. seem behave well predict.glm yet, prediction primary interest generalizability transportability analysis.","code":""}]

<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Estimates the coefficients of a marginal structural model (MSM) using IP weighting in a generalizability or transportability analysis. In particular, the estimators should be unbiased for the coefficients in the superpopulation or the target population, respectively."><title>Transportability analysis using IOPW — transportIP • TransportHealthR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transportability analysis using IOPW — transportIP"><meta property="og:description" content="Estimates the coefficients of a marginal structural model (MSM) using IP weighting in a generalizability or transportability analysis. In particular, the estimators should be unbiased for the coefficients in the superpopulation or the target population, respectively."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">TransportHealthR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/transportIP.html">Transportability analysis using IOPW with TransportHealthR</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Transportability analysis using IOPW</h1>
      
      <div class="d-none name"><code>transportIP.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Estimates the coefficients of a marginal structural model (MSM) using IP weighting in a generalizability or transportability analysis. In particular, the estimators should be unbiased for the coefficients in the superpopulation or the target population, respectively.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">transportIP</span><span class="op">(</span></span>
<span>  <span class="va">msmFormula</span>,</span>
<span>  propensityScoreModel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  participationModel <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  propensityWeights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  participationWeights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  treatment <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  participation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  family <span class="op">=</span> <span class="fu">stats</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"logistic"</span>, <span class="st">"probit"</span>, <span class="st">"loglog"</span>, <span class="st">"cloglog"</span>, <span class="st">"cauchit"</span><span class="op">)</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  transport <span class="op">=</span> <span class="cn">T</span>,</span>
<span>  bootstrapNum <span class="op">=</span> <span class="fl">500</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>msmFormula</dt>
<dd><p>A formula for the MSM to be fitted, which usually includes the outcome, the treatment and any effect modifiers.</p></dd>


<dt>propensityScoreModel</dt>
<dd><p>Either a formula or a <code>glm</code> object representing the model for treatment assignment given covariates.</p></dd>


<dt>participationModel</dt>
<dd><p>Either a formula or a <code>glm</code> object representing the model for study participation given effect modifiers. If a formula and the "data" argument is a list, then add participation as the left-hand side of the formula.</p></dd>


<dt>propensityWeights</dt>
<dd><p>Vector of custom weights balancing covariates between treatments. Providing them will override the formula or model provided by <code>propensityScoreModel</code>. This vector should have as any entries as the sample size of the study data.</p></dd>


<dt>participationWeights</dt>
<dd><p>Vector of custom weights balancing effect modifiers between study and target populations. Providing them will override the formula or model provided by <code>participationModel</code>. This vector should have as any entries as the sample size of the study data.</p></dd>


<dt>treatment</dt>
<dd><p>String indicating name of treatment variable. If <code>NULL</code>, it will be auto-detected from <code>propensityScoreModel</code> if provided; otherwise it will remain <code>NULL</code>. Note that when using custom weights, <code>treatment</code> should be provided so that <code>summary.transportIP</code> and <code>plot.transportIP</code> works.</p></dd>


<dt>participation</dt>
<dd><p>String indicating name of participation variable. If <code>NULL</code>, it will be auto-detected from <code>participationModel</code> if provided; otherwise it will remain <code>NULL</code>. Note that when using custom weights, <code>participation</code> should be provided so that <code>summary.transportIP</code> and <code>plot.transportIP</code> works.</p></dd>


<dt>response</dt>
<dd><p>String indicating name of response variable. If <code>NULL</code>, it will be auto-detected form <code>msmFormula</code>.</p></dd>


<dt>family</dt>
<dd><p>Either a <code>family</code> function as used for <code>glm</code>, or one of <code>c("coxph", "survreg")</code>.</p></dd>


<dt>method</dt>
<dd><p>Link function used for <code>polr</code>, one of <code>c("logistic", "probit", "loglog", "cloglog", "cauchit")</code>.</p></dd>


<dt>data</dt>
<dd><p>Either a single data frame containing merged study and target datasets, or a list containing the study dataset and the target dataset. Note that if participationModel is a glm object, the datasets would have been merged, so provide the merged dataset containing response, treatment, covariates controlled for in the original study, study participation and effect modifiers if this is the case. Make sure to code treatment and participation as 0-1 or TRUE-FALSE, with 1 and TRUE representing treatment group and study data, respectively.</p></dd>


<dt>transport</dt>
<dd><p>A boolean indicating whether a generalizability analysis (false) or a transportability analysis (true) is done.</p></dd>


<dt>bootstrapNum</dt>
<dd><p>Number of bootstrap datasets to simulate to obtain robust variance estimate.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>transportIP</code> object containing the following components:</p><ul><li><p><code>msm</code>: Raw model fit object for MSM of class <code>glm</code>, <code>survreg</code> and <code>coxph</code>, with the correct variance estimators appropriately replaced. If of class <code>glm</code>, it will have an extra <code>var</code> component containing the correct variance estimates.</p></li>
<li><p><code>propensityScoreModel</code>: Model of treatment assignment, <code>NULL</code> if not provided and custom propensity weights are used</p></li>
<li><p><code>participationModel</code>: Model of study participation, <code>NULL</code> if not provided and custom propensity weights are used</p></li>
<li><p><code>propensityWeights</code>: Propensity weights used</p></li>
<li><p><code>participationWeights</code>: Participation weights used</p></li>
<li><p><code>finalWeights</code>: Weights used to fit MSM</p></li>
<li><p><code>customPropensity</code>: Boolean indicating whether custom propensity weights are used</p></li>
<li><p><code>customParticipation</code>: Boolean indicating whether custom participation weights are used</p></li>
<li><p><code>treatment</code>: String indicating variable name of treatment</p></li>
<li><p><code>participation</code>: String indicating variable name of participation</p></li>
<li><p><code>response</code>: String indicating variable name of response</p></li>
<li><p><code>data</code>: Data provided in <code>data</code> argument. Either a list containing study data and target data or a data frame containing both.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function fits models of treatment assignment and study participation in order to calculate the weights used to fit the MSM. For each of these models, if a formula is provided, logistic regression is used by default. If a <code>glm</code> object is provided, the function extracts the necessary weights from the object. The function does not support other weighting methods, so if they are required, provide custom weights.</p>
<p>The MSM-fitting functions do not provide correct standard errors as-is. Bootstrap is used to calculate robust bootstrap variance estimators of the parameter estimators. The function replaces the variance component in <code>summary.glm</code>, <code>coxph</code> and <code>survreg</code> with the robust variance estimators directly. This does not seem to behave well with <code>predict.glm</code> yet, but prediction is not of primary interest in a generalizability or transportability analysis.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Quang Vuong.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

